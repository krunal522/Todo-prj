import React, { useState } from 'react'
import { StyleSheet, Text, View, TextInput, Button, ScrollView, TouchableOpacity, FlatList } from 'react-native';
import { StatusBar } from 'expo-status-bar';

export default function App() {
	const [inputText, setInputText] = useState('');
	const [listItems, setListItems] = useState([]);

	const textChangeHandler = (enteredText) => {
		setInputText(inputText => enteredText);
	}
	const onpresHandler = () => {
		setListItems(listItems => {
			return [
				...listItems,
				{
					id: Math.random().toString(),
					value: inputText
				}
			]
		});
		setInputText('');
		console.log(listItems);
	}
	const removeTask = (listId) => {
		setListItems(listItems.filter((item) => item.id != listId));
	}
	return (
		<View style={styles.container}>
			<View style={styles.form}>
				<View style={{ flex: 3, marginRight: 20 }}>
					<TextInput style={styles.inputControl} placeholder="Enter Your Task" value={inputText} onChangeText={textChangeHandler} />
				</View>
				<View style={styles.btn}>
					<Button title="Add New Task" onPress={onpresHandler} />
				</View>
			</View>
			<View>
				{/* <ScrollView>
					{listItems.map((value, index) => {
						return (
							<TouchableOpacity key={index} style={styles.listItem}>
								<Text style={styles.itemText}>{value}</Text>
							</TouchableOpacity>
						)
					})}
				</ScrollView> */}
				<FlatList
					data={listItems}
					renderItem={(list) => {
						return (
							<TouchableOpacity style={styles.listItem} onPress={() => {
								removeTask(list.item.id)
							}}>
								<Text style={styles.itemText}>{list.item.value}</Text>
							</TouchableOpacity>
						)
					}}
				/>
			</View>
			<StatusBar style="auto" />
		</View>
	);
}
const styles = StyleSheet.create({
	container: {
		margin: 20,

		//  backgroundColor:'red',  
	},
	form: {
		display: 'flex',
		flexDirection: 'row'
	},
	inputControl: {
		padding: 7,
		borderColor: 'black',
		borderWidth: 1
	},
	btn: {
		flex: 1,
		height: 100,
	},
	listItem: {
		backgroundColor: "gray",
		color: "white",
		marginHorizontal: 500,
		marginTop: 5,
		fontSize: 10,
	},
	itemText: {
		color: 'white',
		backgroundColor: 'black',
		fontSize: 15,
		padding: 12,
	}
});
